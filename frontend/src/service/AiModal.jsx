import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for location : London, for 4 days for couple with a Cheap budget, Give me a Hotels options list with Hotel name, Hotel address, Price, Hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place details, place image url, geo coordinates, ticket pricing, rating, time travel each of the location for 4 days with each day plan with best time to visit in JSON format\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a JSON format travel plan for a couple visiting London on a budget for 4 days, along with hotel options and a detailed itinerary:\n\n```json\n{\n  "tripDetails": {\n    "location": "London, England",\n    "duration": "4 Days",\n    "budget": "Cheap",\n    "travelers": "Couple"\n  },\n  "hotelOptions": [\n    {\n      "hotelName": "The Dictionary Hostel",\n      "hotelAddress": "10-20 Kingsland Rd, London E2 8DA, United Kingdom",\n      "price": "£50-£80 per night",\n      "hotelImageUrl": "https://example.com/dictionaryhostel.jpg",\n      "geoCoordinates": {\n        "latitude": 51.5255,\n        "longitude": -0.0768\n      },\n      "rating": 4.2,\n      "description": "A stylish hostel with private rooms available, offering a social atmosphere and well-located in Shoreditch."\n    },\n    {\n      "hotelName": "St. Christopher\'s Inn Camden",\n      "hotelAddress": "48-50 Camden High St, London NW1 0LT, United Kingdom",\n      "price": "£60-£90 per night",\n      "hotelImageUrl": "https://example.com/stchristopherscamden.jpg",\n      "geoCoordinates": {\n        "latitude": 51.5398,\n        "longitude": -0.1417\n      },\n      "rating": 4.0,\n      "description": "Located in the vibrant Camden Town, this hostel offers comfortable rooms and easy access to markets and nightlife."\n    },\n    {\n      "hotelName": "Clink78 Hostel",\n      "hotelAddress": "78 King\'s Cross Rd, London WC1X 9QG, United Kingdom",\n       "price": "£55-£85 per night",\n      "hotelImageUrl": "https://example.com/clink78hostel.jpg",\n      "geoCoordinates": {\n        "latitude": 51.5308,\n        "longitude": -0.1207\n      },\n      "rating": 4.1,\n      "description": "Housed in a former courthouse, this hostel offers a unique experience, well-connected via Kings Cross Station."\n    }\n      ,\n      {\n        "hotelName": "Tune Hotel Paddington",\n        "hotelAddress": "1-13 Praed St, Paddington, London W2 1NJ, United Kingdom",\n         "price": "£70-£100 per night",\n        "hotelImageUrl": "https://example.com/tunehotelpaddington.jpg",\n        "geoCoordinates": {\n          "latitude": 51.5168,\n          "longitude": -0.1779\n        },\n        "rating": 4.3,\n        "description": "A budget hotel with comfortable, no-frills rooms, located conveniently near Paddington Station."\n      }\n  ],\n   "itinerary": {\n      "day1": {\n        "theme": "Royal London and Parks",\n        "bestTimeToVisit": "Morning and Afternoon",\n      "places": [\n         {\n            "placeName": "Buckingham Palace",\n            "placeDetails": "The official residence of the monarch. Watch the Changing of the Guard ceremony (check schedule beforehand).",\n            "placeImageUrl": "https://example.com/buckinghampalace.jpg",\n            "geoCoordinates": {\n             "latitude": 51.5014,\n             "longitude": -0.1419\n            },\n             "ticketPricing": "Free (for viewing exterior and guard change)",\n            "rating": 4.6,\n             "timeTravel": "15 minutes by tube from central hotels"\n         },\n        {\n            "placeName": "St. James\'s Park",\n            "placeDetails": "A beautiful royal park, perfect for a relaxing stroll. Walk from Buckingham Palace.",\n            "placeImageUrl": "https://example.com/stjamespark.jpg",\n             "geoCoordinates": {\n               "latitude": 51.5031,\n              "longitude": -0.1326\n            },\n            "ticketPricing": "Free",\n            "rating": 4.5,\n            "timeTravel": "5 minutes walking from Buckingham Palace"\n        },\n         {\n             "placeName": "Houses of Parliament and Big Ben",\n             "placeDetails": "Iconic landmarks of British democracy. Take photos from Westminster Bridge.",\n            "placeImageUrl": "https://example.com/parliament.jpg",\n            "geoCoordinates": {\n             "latitude": 51.5010,\n              "longitude": -0.1246\n           },\n            "ticketPricing": "Free (for exterior viewing). £30-£40 for guided tours",\n            "rating": 4.5,\n            "timeTravel": "10 minutes walking from St. James\'s Park"\n         },\n         {\n            "placeName": "Trafalgar Square",\n            "placeDetails": "A vibrant public square with Nelson\'s Column and the National Gallery nearby.",\n            "placeImageUrl": "https://example.com/trafalgarsquare.jpg",\n           "geoCoordinates": {\n               "latitude": 51.5080,\n             "longitude": -0.1281\n           },\n            "ticketPricing": "Free",\n            "rating": 4.4,\n           "timeTravel": "15 minutes walking from Houses of Parliament"\n         }\n        ]\n      },\n      "day2": {\n         "theme": "Museums and South Bank",\n         "bestTimeToVisit": "Morning and Afternoon",\n         "places": [\n           {\n             "placeName": "British Museum",\n             "placeDetails": "Explore world history and culture. Focus on key exhibits to manage time.",\n            "placeImageUrl": "https://example.com/britishmuseum.jpg",\n             "geoCoordinates": {\n               "latitude": 51.5194,\n               "longitude": -0.1269\n              },\n             "ticketPricing": "Free (donations welcome)",\n              "rating": 4.7,\n             "timeTravel": "20 minutes by tube from central hotels"\n           },\n           {\n              "placeName": "South Bank",\n              "placeDetails": "Walk along the Thames, enjoy street performers, and visit the Tate Modern (free entry).",\n             "placeImageUrl": "https://example.com/southbank.jpg",\n               "geoCoordinates": {\n                 "latitude": 51.5079,\n                 "longitude": -0.1131\n               },\n             "ticketPricing": "Free",\n            "rating": 4.5,\n            "timeTravel": "25 minutes by tube from British Museum"\n           },\n         {\n              "placeName": "Borough Market",\n              "placeDetails": "Sample food from all over the world at one of London\'s oldest food markets.",\n             "placeImageUrl": "https://example.com/boroughmarket.jpg",\n              "geoCoordinates": {\n                 "latitude": 51.5057,\n                  "longitude": -0.0907\n                },\n             "ticketPricing": "Free (food purchases optional)",\n             "rating": 4.6,\n              "timeTravel": "15 minutes by tube from South Bank"\n            }\n         ]\n       },\n    "day3": {\n        "theme": "Markets and East End",\n        "bestTimeToVisit": "Morning and Afternoon",\n      "places": [\n          {\n              "placeName": "Camden Market",\n              "placeDetails": "Explore quirky shops, alternative fashion, and street food. Be prepared for crowds.",\n              "placeImageUrl": "https://example.com/camdenmarket.jpg",\n               "geoCoordinates": {\n               "latitude": 51.5417,\n                "longitude": -0.1425\n             },\n              "ticketPricing": "Free (shopping optional)",\n              "rating": 4.4,\n              "timeTravel": "30 minutes by tube from central hotels"\n          },\n          {\n              "placeName": "Brick Lane",\n              "placeDetails": "Experience vibrant street art, vintage shops, and diverse cuisine.",\n              "placeImageUrl": "https://example.com/bricklane.jpg",\n               "geoCoordinates": {\n                 "latitude": 51.5218,\n                "longitude": -0.0730\n              },\n              "ticketPricing": "Free (food purchases optional)",\n              "rating": 4.3,\n              "timeTravel":"25 minutes by tube from Camden Market"\n           },\n           {\n            "placeName": "Shoreditch",\n             "placeDetails": "Discover trendy cafes, art galleries, and creative spaces.",\n            "placeImageUrl": "https://example.com/shoreditch.jpg",\n              "geoCoordinates": {\n                 "latitude": 51.5254,\n                "longitude": -0.0760\n               },\n             "ticketPricing": "Free (food/drinks optional)",\n              "rating": 4.4,\n              "timeTravel": "10 minutes walking from Brick Lane"\n           }\n        ]\n      },\n       "day4": {\n          "theme": "Greenwich and Views",\n          "bestTimeToVisit": "Morning and Afternoon",\n         "places": [\n             {\n               "placeName": "Greenwich Park",\n                "placeDetails": "Visit the Royal Observatory, stand on the Prime Meridian Line, and enjoy panoramic city views.",\n                "placeImageUrl": "https://example.com/greenwichpark.jpg",\n                 "geoCoordinates": {\n                    "latitude": 51.4781,\n                    "longitude": -0.0003\n                   },\n                 "ticketPricing": "Park is Free. Royal Observatory entry fee applies (£16-£18)",\n                  "rating": 4.6,\n                 "timeTravel":"45 minutes by tube and DLR from Central London"\n               },\n           {\n              "placeName": "Cutty Sark",\n              "placeDetails": "See the historic clipper ship. Optional paid tour is available.",\n              "placeImageUrl": "https://example.com/cuttysark.jpg",\n                "geoCoordinates": {\n                   "latitude": 51.4812,\n                   "longitude": -0.0088\n                 },\n                "ticketPricing": "£15-£18 (optional)",\n                "rating": 4.4,\n                "timeTravel": "15 minutes walking from Greenwich Park"\n             },\n             {\n                  "placeName": "Emirates Air Line Cable Car",\n                  "placeDetails": "Enjoy scenic views of the Thames. A fun experience before heading to the airport.",\n                  "placeImageUrl": "https://example.com/emiratescablecar.jpg",\n                   "geoCoordinates": {\n                      "latitude": 51.5027,\n                      "longitude": 0.0250\n                     },\n                   "ticketPricing": "£6-£8 per person",\n                  "rating": 4.3,\n                  "timeTravel": "30 minutes by tube and DLR from Cutty Sark"\n              }\n         ]\n       }\n   }\n}\n```\n\n**Key Points & Budget Tips:**\n\n*   **Accommodation:** Hostels and budget hotels are the most economical options. Prices listed are approximate and can vary. Consider booking in advance.\n*   **Transportation:** Use Oyster cards or contactless payment for the tube and buses. Walking is a great way to see the city and save money.\n*   **Food:** Take advantage of supermarket food and local food markets for budget-friendly meals. Avoid tourist traps for meals.\n*   **Free Activities:** London has many free museums, parks, and walking routes. Prioritize these on a budget.\n*   **Timing:** Consider visiting during the shoulder season (spring or autumn) for slightly lower prices. Check for free events and festivals that may coincide with your trip.\n\n**Important:**\n* **Image URLS:**  The image URLs are placeholders, you\'ll need to replace these with actual URLs of images relevant to the places.\n* **Ticket Pricing:** These prices are approximate. Always check the official website before visiting as prices are subject to change.\n* **Travel Times:** Travel times are estimates and depend on transport method and traffic.\n\nRemember to customize this plan to your interests and enjoy your trip to London!\n',
        },
      ],
    },
  ],
});
